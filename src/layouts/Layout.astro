---
import "@/styles/reset.css"
import "@/styles/variables.css"
import "@/styles/global.css"
import type { Metadata } from "@/types/type.d.ts"
import "@fontsource-variable/m-plus-1"
import { SITE_TITLE, SITE_DESCRIPTION } from "@/constants/metadata.ts"

type Props = Metadata
const { title = SITE_TITLE, description = SITE_DESCRIPTION, image } = Astro.props

const siteTitle = title === SITE_TITLE ? SITE_TITLE : `${title} | ${SITE_TITLE}`
const canonialURL = new URL(Astro.url.pathname, Astro.site)
const socialImageURL = new URL(image ?? "/ogp.png", Astro.site)
---

<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />
        <meta name="generator" content={Astro.generator} />
        <title>{siteTitle}</title>
        <meta name="title" content={siteTitle} />
        <meta name="description" content={description} />

        <meta property="og:type" content="website" />
        <meta property="og:url" content={canonialURL} />
        <meta property="og:title" content={siteTitle} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={socialImageURL} />

        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content={canonialURL} />
        <meta property="twitter:title" content={siteTitle} />
        <meta property="twitter:description" content={description} />
        <meta property="twitter:image" content={socialImageURL} />

        <link rel="canonical" href={canonialURL} />
        <link rel="sitemap" href="/sitemap-index.xml" />

        <!-- Google tag (gtag.js) -->
        <script type="text/partytown" src="https://www.googletagmanager.com/gtag/js?id=G-GY0R7XR05P"></script>
        <script type="text/partytown">
            window.dataLayer = window.dataLayer || []
            function gtag() {
                dataLayer.push(arguments)
            }
            gtag("js", new Date())

            gtag("config", "G-GY0R7XR05P")
        </script>
    </head>
    <body>
        <slot />
    </body>
</html>

<style></style>
